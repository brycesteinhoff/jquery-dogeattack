(function(e){var t={adverbsForAdjectives:["so","much","such","very","quite"],possibleAdjectives:["hip","concern","scare","friendship","curious"],requiredAdjectives:[],possiblePhrases:[],requiredPhrases:["wow","plz"],maxPhrases:4,fadeTime:50,totalTime:1e4,attrs:{},fontSize:48,colors:["red","green","orange","violet","aqua","yellow","slateblue","purple","pink","lime","fuchsia","gold","indigo"],background:"doge.jpg",backgroundSize:{width:675,height:506},ratio:"preserve",onAttack:function(e){},onStop:function(e){}};e.fn.dogeattack=function(n){if(this.length==0){return this}var r={};var i={};var s=this;var o=function(){r.settings=e.extend({},t,n);if(s.css("position")=="static"){s.css("position","relative")}r.wrapper=u()};var u=function(){var t={position:"absolute",width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,"z-index":5e3,display:"none",overflow:"hidden",background:"#000"};var n=e("<div />").attr(r.settings.attrs).css(t).appendTo(s);return n};var a=function(){r.container=f();r.phrases=l();r.phraseElements=p();r.wrapper.show();v();setTimeout(g,r.settings.totalTime)};var f=function(){var t={};if(r.settings.ratio=="preserve"){var n=r.settings.backgroundSize.width/r.settings.backgroundSize.height;var i=r.wrapper.width()/r.wrapper.height();if(n==i){t.width="100%";t.height="100%"}else if(n>i){t.width="100%";t.height=r.wrapper.width()/n}else if(i>n){t.width=r.wrapper.height()*n;t.height="100%"}}else{t.width="100%";t.height="100%"}if(r.settings.ratio=="preserve"&&n>i){t.topMargin=(r.wrapper.height()-t.height)/2}else{t.topMargin=0}var s={position:"relative",width:t.width,height:t.height,top:0,left:0,margin:t.topMargin+"px auto",padding:0,background:"url("+r.settings.background+")","background-size":"100% 100%"};var o=e("<div />").css(s).appendTo(r.wrapper);return o};var l=function(){var e=c(r.settings.requiredAdjectives,r.settings.requiredPhrases);if(r.settings.maxPhrases<=e.length){return e.slice(0,r.settings.maxPhrases)}var t=c(r.settings.possibleAdjectives,r.settings.possiblePhrases);if(r.settings.maxPhrases<e.length+t.length){t=t.slice(0,r.settings.maxPhrases-e.length)}return i.shuffleArray(e.concat(t))};var c=function(t,n){var r=[];e.each(t,function(e,t){r.push(h(t))});r=r.concat(n);r=i.shuffleArray(r);return r};var h=function(e){var t=r.settings.adverbsForAdjectives[i.randomInRange(r.settings.adverbsForAdjectives.length)];return t+" "+e};var p=function(){var t=[];e.each(r.phrases,function(n,i){var s=e("<span>"+i+"</span>");s.css(d());s.appendTo(r.container);t.push(s)});return t};var d=function(){var e=function(){return r.settings.colors[i.randomInRange(r.settings.colors.length)]};var t={color:e(),"font-size":r.settings.fontSize+"px","font-family":'"Comic Sans MS", cursive, sans-serif',"line-height":r.settings.fontSize+"px","text-shadow":"-1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000, 1px 1px 0px #000",display:"none"};return t};var v=function(){var t=(r.settings.totalTime-(r.phraseElements.length+3)*r.settings.fadeTime)/r.phraseElements.length;var n=function(e){e.fadeIn(function(){r.settings.fadeTime},i(e))};var i=function(e){setTimeout(function(){e.fadeOut(r.settings.fadeTime)},t)};e.each(r.phraseElements,function(e,i){m(i);var s=e*(t+r.settings.fadeTime)+r.settings.fadeTime;setTimeout(function(){n(i)},s)})};var m=function(e){var t=r.container.width()-e.width();var n=r.container.height()-e.height();var s={position:"absolute",left:i.randomInRange(t),top:i.randomInRange(n)};e.css(s)};var g=function(){r.wrapper.fadeOut(r.settings.fadeTime*5);r.container.remove();delete r.container;delete r.phrases;delete r.phraseElements;r.settings.onStop(r.wrapper)};i.randomInRange=function(e){return Math.floor(Math.random()*e)};i.shuffleArray=function(e){for(var t,n,r=e.length;r;t=Math.floor(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e};s.attack=function(e){a();r.settings.onAttack(r.wrapper);e.preventDefault()};o();return this}})(jQuery)